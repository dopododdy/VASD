<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‚Äì VASD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;800&family=Sarabun:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DESIGN TOKENS (iPad Landscape - No Scroll)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
  --navy:       #0b1929;
  --navy-mid:   #112240;
  --teal:       #0ea5a0;
  --teal-light: #2dd4bf;
  --emerald:    #10b981;
  --amber:      #fbbf24;
  --rose:       #f87171;

  --surface:    rgba(255,255,255,0.06);
  --surface-2:  rgba(255,255,255,0.1);
  --border:     rgba(255,255,255,0.15);
  --text:       #ffffff;
  --text-dim:   #cbd5e1;

  --radius-lg:  20px;
  --radius-xl:  32px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: "Sarabun", sans-serif;
  background: var(--navy);
  color: var(--text);
  height: 100vh;         /* ‡∏•‡πá‡∏≠‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏õ‡πä‡∏∞‡πÜ */
  width: 100vw;
  overflow: hidden;      /* üõë ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏ó‡∏∏‡∏Å‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á */
  display: flex; 
  align-items: center; 
  justify-content: center;
  touch-action: none;    /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Å/‡∏ã‡∏π‡∏°‡∏ö‡∏ô iPad */
}
body::before {
  content: ""; position: absolute; inset: 0; z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(14,165,160,0.15) 0%, transparent 60%);
}

.container {
  width: 100%; height: 100%;
  max-width: 1366px;     /* ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö iPad Pro */
  padding: 32px 40px;
  display: flex;
  flex-direction: column;
}

/* ‚îÄ‚îÄ TWO COLUMN LAYOUT (‡πÅ‡∏ö‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤) ‚îÄ‚îÄ */
.grid-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32px;
  height: 100%;
}

/* ‚îÄ‚îÄ STATES ‚îÄ‚îÄ */
#standbyScreen, #successScreen, #consentScreen {
  height: 100%;
  width: 100%;
  animation: fadeIn 0.4s ease;
}
#consentScreen { display: none; }
#successScreen { display: none; text-align: center; flex-direction: column; justify-content: center; align-items: center; }

/* ‚îÄ‚îÄ STANDBY LEFT: ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‚îÄ‚îÄ */
.standby-left {
  background: rgba(239, 68, 68, 0.06);
  border: 2px solid rgba(239, 68, 68, 0.25);
  border-radius: var(--radius-xl);
  padding: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.warning-icon { font-size: 64px; line-height: 1; margin-bottom: 16px; text-align: center; }
.standby-left h2 { color: var(--amber); font-size: 40px; font-weight: 800; text-align: center; margin-bottom: 30px; }
.standby-left p { font-size: 26px; line-height: 1.6; color: var(--text); margin-bottom: 20px; }
.standby-left ul { margin-left: 40px; margin-bottom: 30px; font-size: 26px; line-height: 1.7; color: var(--text-dim); }
.standby-left li { margin-bottom: 12px; }

.highlight-rose { color: var(--rose); font-weight: 700; font-size: 28px; }
.highlight-amber { color: var(--amber); font-weight: 700; }

.standby-footer {
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 24px;
  color: var(--text-dim);
  font-size: 24px;
  margin-top: auto; /* ‡∏î‡∏±‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î */
}

/* ‚îÄ‚îÄ STANDBY RIGHT: ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ‚îÄ‚îÄ */
.standby-right {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 40px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius-xl);
}
.brand-logo {
  max-width: 280px; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏£‡∏¥‡∏á */
  height: auto;
  margin-bottom: 32px;
  filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
}
.brand-th {
  font-size: 32px;
  color: var(--teal-light);
  font-weight: 800;
  line-height: 1.4;
  margin-bottom: 12px;
}
.brand-en {
  font-size: 22px;
  color: var(--text-dim);
  margin-bottom: 50px;
  letter-spacing: 0.5px;
}

/* Loading Box */
.loading-box {
  display: flex; flex-direction: column; align-items: center; gap: 16px;
  background: rgba(0,0,0,0.2);
  padding: 24px 40px;
  border-radius: 100px;
}
.spinner {
  width: 48px; height: 48px;
  border: 5px solid var(--surface-2); border-top-color: var(--teal-light);
  border-radius: 50%; animation: spin 1s linear infinite;
}

/* ‚îÄ‚îÄ CARDS (‡∏´‡∏ô‡πâ‡∏≤ Consent - ‡∏ã‡πâ‡∏≤‡∏¢) ‚îÄ‚îÄ */
.col-left { display: flex; flex-direction: column; gap: 24px; }
.col-right { display: flex; flex-direction: column; gap: 24px; }

.card {
  background: var(--surface); border: 2px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 32px;
}
.card.flex-1 { flex: 1; display: flex; flex-direction: column; min-height: 0; }

.card-title {
  font-size: 30px; font-weight: 800; color: var(--teal-light);
  margin-bottom: 20px; display: flex; align-items: center; gap: 12px;
  border-bottom: 2px solid var(--border); padding-bottom: 16px;
}

.info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.info-item { display: flex; flex-direction: column; gap: 4px; }
.info-label { font-size: 20px; color: var(--text-dim); font-weight: 600; }
.info-value { font-size: 28px; font-weight: 700; color: #fff; line-height: 1.3; }

/* ‚îÄ‚îÄ ANIMALS LIST ‚îÄ‚îÄ */
#dispAnimals { flex: 1; overflow-y: auto; padding-right: 10px; } 
#dispAnimals::-webkit-scrollbar { width: 8px; }
#dispAnimals::-webkit-scrollbar-thumb { background: var(--teal); border-radius: 10px; }

.animal-item {
  background: var(--surface-2); border-radius: 20px; border: 1px solid var(--border);
  padding: 20px 24px; margin-bottom: 16px;
  display: flex; justify-content: space-between; align-items: center;
}
.animal-name { font-size: 28px; font-weight: 800; color: #fff; display: flex; align-items: center; gap: 12px;}
.animal-spc { font-size: 20px; color: var(--navy); background: var(--teal-light); font-weight: 700; padding: 6px 16px; border-radius: 30px;}
.animal-svcs { font-size: 26px; color: var(--amber); font-weight: 700; }

/* ‚îÄ‚îÄ CONSENT TEXT (‡∏´‡∏ô‡πâ‡∏≤ Consent - ‡∏Ç‡∏ß‡∏≤) ‚îÄ‚îÄ */
.consent-box {
  background: rgba(245, 158, 11, 0.06); border: 2px solid rgba(245, 158, 11, 0.25);
  border-radius: var(--radius-xl);
  padding: 40px;
  flex: 1; 
  display: flex; flex-direction: column; justify-content: space-evenly;
}
.consent-box h3 { color: var(--amber); font-size: 34px; margin-bottom: 20px; text-align: center; font-weight: 800;}
.consent-box p { font-size: 24px; line-height: 1.7; color: var(--text); }
.consent-box strong { font-size: 26px; color: var(--amber); }

/* ‚îÄ‚îÄ BUTTON ‚îÄ‚îÄ */
.btn-accept {
  width: 100%; height: 100px;
  background: linear-gradient(135deg, var(--emerald), #059669);
  color: #fff; font-size: 40px; font-weight: 800; font-family: "Sarabun", sans-serif;
  border: none; border-radius: 100px;
  cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 16px;
  box-shadow: 0 15px 40px rgba(16, 185, 129, 0.3);
  transition: transform 0.2s, background 0.2s;
  flex-shrink: 0;
}
.btn-accept:active { transform: scale(0.97); background: #059669; }

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
</head>
<body>

<div class="container">

  <div id="standbyScreen" class="grid-layout">
    
    <div class="standby-left">
      <div class="warning-icon">‚ö†Ô∏è</div>
      <h2>‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡πà‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à</h2>
      
      <p>
        <span class="highlight-amber">‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏¢‡∏≤‡∏™‡∏•‡∏ö‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</span> 
        ‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß ‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏ï‡∏±‡∏ö ‡πÑ‡∏ï ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô
      </p>
      
      <p>‡∏†‡∏≤‡∏ß‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà :</p>
      <ul>
        <li>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ï‡πà‡∏≥ / ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡∏ú‡∏¥‡∏î‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞</li>
        <li>‡∏†‡∏≤‡∏ß‡∏∞‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß / ‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</li>
        <li class="highlight-rose">‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (‡∏û‡∏ö‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å ‡πÅ‡∏ï‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ)</li>
      </ul>

      <div class="standby-footer">
        * ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏¢‡∏≤‡∏™‡∏•‡∏ö ‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ä‡∏µ‡∏û‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î
      </div>
    </div>

    <div class="standby-right">
      <img src="logo.png" alt="VASD Logo" class="brand-logo" onerror="this.style.display='none'"> 
      
      <div class="brand-th">
        ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ ‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå<br>
        ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏£‡∏≤‡∏ä‡∏°‡∏á‡∏Ñ‡∏•‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å
      </div>
      <div class="brand-en">
        (Veterinary Academic Service Division: VASD)
      </div>

      <div class="loading-box">
        <div class="spinner"></div>
        <span style="font-size: 26px; color: #fff; font-weight: 600;">‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</span>
      </div>
    </div>

  </div>

  <div id="consentScreen" class="grid-layout">
    
    <div class="col-left">
      <div class="card">
        <div class="card-title">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå</div>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</span><span class="info-value" id="dispName">-</span></div>
          <div class="info-item"><span class="info-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</span><span class="info-value" id="dispPhone">-</span></div>
          <div class="info-item"><span class="info-label">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</span><span class="info-value" id="dispId">-</span></div>
          <div class="info-item"><span class="info-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</span><span class="info-value" id="dispAddress" style="font-size: 22px;">-</span></div>
        </div>
      </div>

      <div class="card flex-1">
        <div class="card-title">üêæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (<span id="dispCount">0</span>)</div>
        <div id="dispAnimals"></div>
      </div>
    </div>

    <div class="col-right">
      <div class="consent-box">
        <h3>‚öñÔ∏è ‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</h3>
        <p><strong>1. ‡∏Å‡∏≤‡∏£‡∏á‡∏î‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</strong><br> ‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏á‡∏î‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 8-12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏•‡∏±‡∏Å</p>
        <p><strong>2. ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:</strong><br> ‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏¢‡∏≤‡∏™‡∏•‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡πÅ‡∏°‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏à‡∏∞‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ï‡∏≤‡∏°</p>
        <p><strong>3. ‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°:</strong><br> ‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡∏´‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</p>
      </div>

      <button type="button" class="btn-accept" onclick="acceptConsent()">
        ‚úÖ ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
      </button>
    </div>

  </div>

  <div id="successScreen">
    <div style="font-size: 120px; margin-bottom: 20px;">üéâ</div>
    <h2 style="font-size: 64px; color: var(--emerald); font-weight: 800;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö</h2>
    <p style="font-size: 38px; color: #fff; margin-top: 20px;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
    <p style="font-size: 30px; color: var(--text-dim); margin-top: 10px;">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
  </div>

</div>

<script type="module">
import { supabase } from "./js/supabase.js";

const consentChannel = supabase.channel('vasd-consent-room');

consentChannel
  .on('broadcast', { event: 'request-consent' }, (payload) => {
    const data = payload.payload;
    showConsentForm(data);
  })
  .subscribe();

function showConsentForm(data) {
  document.getElementById("standbyScreen").style.display = "none";
  document.getElementById("successScreen").style.display = "none";
  document.getElementById("consentScreen").style.display = "grid"; 
  
  document.getElementById("dispName").textContent = data.owner.name;
  document.getElementById("dispPhone").textContent = data.owner.phone;
  document.getElementById("dispId").textContent = data.owner.idCard;
  document.getElementById("dispAddress").textContent = data.owner.address;
  document.getElementById("dispCount").textContent = data.animals.length;

  const container = document.getElementById("dispAnimals");
  container.innerHTML = "";
  data.animals.forEach(anim => {
    const icon = anim.species === "‡πÅ‡∏°‡∏ß" ? "üê±" : "üê∂";
    const svcs = anim.services.join(", ");
    container.innerHTML += `
      <div class="animal-item">
        <div class="animal-name">${icon} ${anim.name} <span class="animal-spc">${anim.sex}</span></div>
        <div class="animal-svcs">${svcs}</div>
      </div>
    `;
  });
}

window.acceptConsent = function() {
  consentChannel.send({
    type: 'broadcast',
    event: 'consent-granted',
    payload: { status: 'accepted', timestamp: new Date().toISOString() }
  });

  document.getElementById("consentScreen").style.display = "none";
  document.getElementById("successScreen").style.display = "flex";

  setTimeout(() => {
    document.getElementById("successScreen").style.display = "none";
    document.getElementById("standbyScreen").style.display = "grid";
  }, 5000);
}
</script>
</body>
</html>
