<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>RMUTTO â€“ VASD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --navy:       #0b1929;
  --navy-mid:   #112240;
  --navy-card:  #162d4a;
  --teal:       #0ea5a0;
  --teal-light: #14c4bc;
  --teal-glow:  rgba(14,165,160,0.25);
  --amber:      #f59e0b;
  --amber-soft: rgba(245,158,11,0.15);
  --rose:       #ef4444;
  --violet:     #8b5cf6;
  --sky:        #3b82f6;
  --emerald:    #10b981;
  --slate:      #64748b;

  --surface:    rgba(255,255,255,0.04);
  --surface-2:  rgba(255,255,255,0.07);
  --border:     rgba(255,255,255,0.08);
  --border-2:   rgba(255,255,255,0.14);
  --text:       #e2e8f0;
  --text-dim:   #94a3b8;
  --text-faint: #4a5568;

  --radius-xs:  6px;
  --radius-sm:  10px;
  --radius:     16px;
  --radius-lg:  22px;
  --radius-xl:  28px;

  --shadow-card: 0 4px 24px rgba(0,0,0,0.3), 0 1px 3px rgba(0,0,0,0.2);
  --shadow-glow: 0 0 30px rgba(14,165,160,0.2);

  /* status palette */
  --c-waiting:  #f59e0b;
  --c-surgery:  #ef4444;
  --c-recovery: #8b5cf6;
  --c-ready:    #3b82f6;
  --c-done:     #10b981;
  --c-total:    #94a3b8;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  font-family: "Sarabun", "Outfit", sans-serif;
  background: var(--navy);
  color: var(--text);
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}

/* Mesh background */
body::before {
  content: "";
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 60% 50% at 20% 10%, rgba(14,165,160,0.12) 0%, transparent 70%),
    radial-gradient(ellipse 50% 40% at 80% 80%, rgba(99,102,241,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 40% 60% at 90% 20%, rgba(245,158,11,0.05) 0%, transparent 50%);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
header {
  position: sticky; top: 0; z-index: 200;
  background: rgba(11,25,41,0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid var(--border);
  padding: 0 20px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.brand {
  display: flex; align-items: center; gap: 10px;
  flex-shrink: 0;
}
.brand-logo {
  width: 38px; height: 38px;
  background: linear-gradient(135deg, var(--teal), var(--teal-light));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  box-shadow: 0 0 20px var(--teal-glow);
}
.brand-name {
  font-family: "Outfit", sans-serif;
  font-size: 15px; font-weight: 700;
  color: #fff;
  line-height: 1;
  letter-spacing: -0.3px;
}
.brand-sub { font-size: 10px; color: var(--text-dim); font-weight: 400; margin-top: 2px; }

/* â”€â”€ Login Panel â”€â”€ */
#loginPanel {
  display: flex; align-items: center; gap: 6px; flex-wrap: nowrap;
}
.input-field {
  padding: 8px 10px; font-size: 12px; font-family: "Sarabun", sans-serif;
  background: var(--surface-2);
  border: 1px solid var(--border-2);
  border-radius: var(--radius-sm);
  color: var(--text); outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.input-field::placeholder { color: var(--text-faint); }
.input-field:focus { border-color: var(--teal); box-shadow: 0 0 0 3px var(--teal-glow); }
.input-field option { background: var(--navy-mid); }
#userName  { width: 96px; }
#userRole  { width: 116px; cursor: pointer; }
#adminPwd  { width: 82px; }

.btn-login {
  padding: 8px 14px; font-size: 12px; font-weight: 600; font-family: "Sarabun", sans-serif;
  background: linear-gradient(135deg, var(--teal), var(--teal-light));
  color: #fff; border: none; border-radius: var(--radius-sm); cursor: pointer;
  white-space: nowrap; letter-spacing: 0.3px;
  box-shadow: 0 2px 12px var(--teal-glow);
  transition: opacity 0.2s, transform 0.15s;
}
.btn-login:active { opacity: 0.85; transform: scale(0.97); }

/* â”€â”€ User Info â”€â”€ */
#userInfo { display: none; align-items: center; gap: 8px; }
.user-pill {
  display: flex; align-items: center; gap: 8px;
  background: var(--surface-2); border: 1px solid var(--border-2);
  border-radius: 30px; padding: 5px 12px 5px 7px;
}
.user-avatar {
  width: 26px; height: 26px;
  background: linear-gradient(135deg, var(--teal), var(--teal-light));
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 12px;
}
#showUser { font-size: 12px; color: var(--text); font-weight: 500; max-width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.btn-logout {
  padding: 6px 12px; font-size: 12px; font-family: "Sarabun", sans-serif;
  background: transparent; color: var(--text-dim);
  border: 1px solid var(--border-2); border-radius: var(--radius-sm); cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.btn-logout:hover { background: var(--surface-2); color: var(--text); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.wrap {
  position: relative; z-index: 1;
  max-width: 900px; margin: 0 auto;
  padding: 28px 18px 100px;
  width: 100%;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MENU GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.menu-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.menu-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px 18px 18px;
  cursor: pointer; text-decoration: none; display: block;
  position: relative; overflow: hidden;
  transition: transform 0.2s, border-color 0.25s, background 0.25s, box-shadow 0.25s;
  animation: slideUp 0.5s ease both;
  -webkit-tap-highlight-color: transparent;
}
.menu-card:hover {
  border-color: var(--teal);
  background: rgba(14,165,160,0.06);
  box-shadow: 0 8px 32px rgba(14,165,160,0.12);
  transform: translateY(-2px);
}
.menu-card:active { transform: scale(0.97); }

/* Ripple dot top-right on hover */
.menu-card::after {
  content: "â€º";
  position: absolute; bottom: 14px; right: 16px;
  font-size: 18px; color: var(--teal);
  opacity: 0; transform: translateX(-4px);
  transition: opacity 0.2s, transform 0.2s;
}
.menu-card:hover::after { opacity: 1; transform: translateX(0); }

.menu-card:nth-child(1) { animation-delay: 0.1s; }
.menu-card:nth-child(2) { animation-delay: 0.13s; }
.menu-card:nth-child(3) { animation-delay: 0.16s; }
.menu-card:nth-child(4) { animation-delay: 0.19s; }
.menu-card:nth-child(5) { animation-delay: 0.22s; }
.menu-card:nth-child(6) { animation-delay: 0.25s; }
.menu-card:nth-child(7) { animation-delay: 0.28s; }
.menu-card:nth-child(8) { animation-delay: 0.31s; }

.card-emoji {
  font-size: 28px; display: block; margin-bottom: 12px; line-height: 1;
}
.card-title {
  font-family: "Outfit", sans-serif;
  font-size: 14px; font-weight: 700;
  color: #fff; margin-bottom: 4px; letter-spacing: -0.2px;
}
.card-desc { font-size: 11px; color: var(--text-dim); line-height: 1.5; padding-right: 16px; }

/* â”€â”€ Notification Badge â”€â”€ */
.notif-badge {
  position: absolute; top: 14px; right: 14px;
  font-size: 10px; font-weight: 700;
  padding: 3px 9px; border-radius: 20px;
  letter-spacing: 0.3px; display: none;
  animation: pulse 2.5s ease-in-out infinite;
}
.nb-waiting  { background: rgba(245,158,11,0.2); color: var(--c-waiting); border: 1px solid rgba(245,158,11,0.4); }
.nb-surgery  { background: rgba(239,68,68,0.2);  color: var(--c-surgery);  border: 1px solid rgba(239,68,68,0.4); }
.nb-recovery { background: rgba(139,92,246,0.2); color: var(--c-recovery); border: 1px solid rgba(139,92,246,0.4); }
.nb-ready    { background: rgba(59,130,246,0.2);  color: var(--c-ready);   border: 1px solid rgba(59,130,246,0.4); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE BOTTOM NAV (â‰¤ 640px)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bottom-nav {
  display: none;
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 300;
  background: rgba(11,25,41,0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-top: 1px solid var(--border-2);
  padding: 8px 0 max(8px, env(safe-area-inset-bottom));
  grid-template-columns: repeat(5, 1fr);
}
.nav-item {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  padding: 6px 4px;
  font-size: 9px; color: var(--text-dim);
  text-decoration: none; cursor: pointer;
  transition: color 0.2s;
  -webkit-tap-highlight-color: transparent;
}
.nav-item:active { color: var(--teal); }
.nav-icon { font-size: 21px; line-height: 1; }
.nav-item.active { color: var(--teal); }
.nav-item.active .nav-icon { filter: drop-shadow(0 0 6px var(--teal)); }

/* â”€â”€ Floating Action Button â”€â”€ */
.fab {
  display: none;
  position: fixed; bottom: 90px; right: 20px; z-index: 250;
  width: 52px; height: 52px;
  background: linear-gradient(135deg, var(--teal), var(--teal-light));
  border-radius: 50%; border: none; cursor: pointer;
  font-size: 24px;
  box-shadow: 0 4px 20px var(--teal-glow), 0 2px 8px rgba(0,0,0,0.3);
  transition: transform 0.2s, box-shadow 0.2s;
  -webkit-tap-highlight-color: transparent;
}
.fab:active { transform: scale(0.93); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
footer {
  text-align: center;
  font-size: 11px; color: var(--text-faint);
  padding: 18px;
  border-top: 1px solid var(--border);
  position: relative; z-index: 1;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes slideUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.65; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 640px) {
  header { height: 58px; padding: 0 14px; }
  .brand-sub { display: none; }
  .brand-name { font-size: 14px; }
  #userName  { width: 78px; }
  #userRole  { width: 100px; }
  #adminPwd  { width: 72px; }
  .btn-login { padding: 8px 11px; }

  .wrap { padding: 20px 14px 80px; }

  .menu-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
  .menu-card { padding: 16px 14px 14px; border-radius: var(--radius); }
  .card-emoji { font-size: 24px; margin-bottom: 10px; }
  .card-title { font-size: 13px; }

  .bottom-nav { display: grid; }
  .fab { display: flex; align-items: center; justify-content: center; }
}

@media (max-width: 380px) {
  #loginPanel { gap: 4px; }
  #userName  { width: 68px; font-size: 11px; }
  #userRole  { width: 90px; font-size: 11px; }
}

/* Desktop refinements */
@media (min-width: 641px) {
  .menu-grid { grid-template-columns: repeat(4, 1fr); }
}

@media (min-width: 900px) {
  .wrap { padding: 36px 24px 60px; }
}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="brand-logo">ğŸ¾</div>
    <div>
      <div class="brand-name">RMUTTO â€“ VASD</div>
      <div class="brand-sub">Veterinary Academic Service Division</div>
    </div>
  </div>

  <div id="loginPanel">
    <input id="userName" class="input-field" placeholder="à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰">
    <select id="userRole" class="input-field">
      <option value="">à¸šà¸—à¸šà¸²à¸—</option>
      <option value="admin">admin</option>
      <option value="à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œ">à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œ</option>
      <option value="à¸ªà¸±à¸•à¸§à¹à¸à¸—à¸¢à¹Œ">à¸ªà¸±à¸•à¸§à¹à¸à¸—à¸¢à¹Œ</option>
      <option value="à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ">à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ</option>
      <option value="à¸™à¸¨ à¸›à¸µ 4 à¸§à¸´à¸ªà¸±à¸à¸à¸µ">à¸™à¸¨ à¸›à¸µ 4 à¸§à¸´à¸ªà¸±à¸à¸à¸µ</option>
      <option value="à¸™à¸¨ à¸›à¸µ 4 à¸¨à¸±à¸¥à¸¢à¹à¸à¸—à¸¢à¹Œ">à¸™à¸¨ à¸›à¸µ 4 à¸¨à¸±à¸¥à¸¢à¹à¸à¸—à¸¢à¹Œ</option>
      <option value="à¸™à¸¨ à¸à¸¢à¸²à¸šà¸²à¸¥">à¸™à¸¨ à¸à¸¢à¸²à¸šà¸²à¸¥</option>
      <option value="à¸™à¸¨ à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢à¸œà¹ˆà¸²à¸•à¸±à¸”">à¸™à¸¨ à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢à¸œà¹ˆà¸²à¸•à¸±à¸”</option>
      <option value="à¸™à¸¨ à¸Šà¹ˆà¸§à¸¢à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›">à¸™à¸¨ à¸Šà¹ˆà¸§à¸¢à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›</option>
    </select>
    <input id="adminPwd" type="password" class="input-field" placeholder="à¸£à¸«à¸±à¸ª admin" style="display:none">
    <button class="btn-login" onclick="login()">à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</button>
  </div>

  <div id="userInfo">
    <div class="user-pill">
      <div class="user-avatar">ğŸ‘¤</div>
      <span id="showUser"></span>
    </div>
    <button class="btn-logout" onclick="logout()">à¸­à¸­à¸</button>
  </div>
</header>

<div class="wrap">
  <div class="menu-grid">
    <a class="menu-card" href="registration.html">
      <span class="card-emoji">ğŸ“</span>
      <div class="card-title">à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™</div>
      <div class="card-desc">à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸±à¸•à¸§à¹Œà¹à¸¥à¸°à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡</div>
    </a>

    <a class="menu-card" href="animals.html">
      <span class="card-emoji">ğŸ¾</span>
      <div class="card-title">à¸ªà¸–à¸²à¸™à¸°à¸ªà¸±à¸•à¸§à¹Œ</div>
      <div class="card-desc">à¸”à¸¹à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¹à¸¥à¸°à¸ªà¸–à¸²à¸™à¸°à¸ªà¸±à¸•à¸§à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</div>
    </a>

    <a class="menu-card" href="surgery.html">
      <div class="notif-badge nb-surgery" id="badge-surgery-menu"></div>
      <span class="card-emoji">ğŸ“‹</span>
      <div class="card-title">à¹‚à¸•à¹Šà¸°à¸œà¹ˆà¸²à¸•à¸±à¸”</div>
      <div class="card-desc">à¸£à¸±à¸šà¹€à¸„à¸ªà¹€à¸‚à¹‰à¸²à¸«à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸•à¸±à¸”</div>
    </a>

    <a class="menu-card" href="anesthesia.html">
      <div class="notif-badge nb-waiting" id="badge-anes-menu"></div>
      <span class="card-emoji">ğŸ©º</span>
      <div class="card-title">à¸§à¸²à¸‡à¸¢à¸²à¸ªà¸¥à¸š</div>
      <div class="card-desc">à¸„à¸³à¸™à¸§à¸“à¸¢à¸² Â· à¸§à¸²à¸‡à¸¢à¸² Â· Vitals</div>
    </a>

    <a class="menu-card" href="recovery.html">
      <div class="notif-badge nb-recovery" id="badge-recovery-menu"></div>
      <span class="card-emoji">ğŸŸ£</span>
      <div class="card-title">à¸à¸±à¸à¸Ÿà¸·à¹‰à¸™</div>
      <div class="card-desc">à¸•à¸´à¸”à¸•à¸²à¸¡à¸à¸²à¸£à¸Ÿà¸·à¹‰à¸™à¸•à¸±à¸§à¸«à¸¥à¸±à¸‡à¸œà¹ˆà¸²à¸•à¸±à¸”</div>
    </a>

    <a class="menu-card" href="rx.html">
      <div class="notif-badge nb-ready" id="badge-rx-menu"></div>
      <span class="card-emoji">ğŸ’Š</span>
      <div class="card-title">à¹‚à¸•à¹Šà¸°à¸ˆà¸±à¸”à¸¢à¸²</div>
      <div class="card-desc">à¸ˆà¸±à¸”à¸à¸²à¸£à¹à¸¥à¸°à¸à¸´à¸¡à¸à¹Œà¹ƒà¸šà¸ªà¸±à¹ˆà¸‡à¸¢à¸²</div>
    </a>

    <a class="menu-card" href="report.html">
      <span class="card-emoji">ğŸ“Š</span>
      <div class="card-title">à¸£à¸²à¸¢à¸‡à¸²à¸™</div>
      <div class="card-desc">à¸ªà¸£à¸¸à¸›à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¥à¸°à¸ªà¸–à¸´à¸•à¸´</div>
    </a>

    <a class="menu-card" href="settings.html">
      <span class="card-emoji">âš™ï¸</span>
      <div class="card-title">à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²</div>
      <div class="card-desc">à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸à¸´à¸¡à¸à¹Œà¹à¸¥à¸°à¸à¸£à¸°à¸”à¸²à¸©</div>
    </a>
  </div>
</div>

<nav class="bottom-nav">
  <a class="nav-item active" href="index.html">
    <span class="nav-icon">ğŸ </span>à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸
  </a>
  <a class="nav-item" href="animals.html">
    <span class="nav-icon">ğŸ¾</span>à¸ªà¸±à¸•à¸§à¹Œ
  </a>
  <a class="nav-item" href="anesthesia.html">
    <span class="nav-icon">ğŸ©º</span>à¸§à¸²à¸‡à¸¢à¸²
  </a>
  <a class="nav-item" href="surgery.html">
    <span class="nav-icon">ğŸ“‹</span>à¸œà¹ˆà¸²à¸•à¸±à¸”
  </a>
  <a class="nav-item" href="recovery.html">
    <span class="nav-icon">ğŸ›ï¸</span>à¸à¸±à¸à¸Ÿà¸·à¹‰à¸™
  </a>
</nav>

<button class="fab" onclick="location.href='registration.html'" title="à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™">
  â•
</button>

<footer>RMUTTO â€“ VASD Â© 2026 &nbsp;Â·&nbsp; Veterinary Academic Service Division</footer>

<script type="module">
import { supabase } from "./js/supabase.js";

/* â”€â”€ Login Logic â”€â”€ */
const nameInput  = document.getElementById("userName");
const roleSelect = document.getElementById("userRole");
const pwdInput   = document.getElementById("adminPwd");
const loginPanel = document.getElementById("loginPanel");
const userInfo   = document.getElementById("userInfo");
const showUser   = document.getElementById("showUser");

roleSelect.onchange = () => {
  pwdInput.style.display = roleSelect.value === "admin" ? "inline-block" : "none";
};

window.login = function () {
  const name = nameInput.value.trim();
  const role = roleSelect.value;
  if (!name || !role) { alert("à¸à¸£à¸¸à¸“à¸²à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­à¹à¸¥à¸°à¹€à¸¥à¸·à¸­à¸à¸šà¸—à¸šà¸²à¸—"); return; }
  if (role === "admin" && pwdInput.value !== "2500") { alert("à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ admin à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"); return; }
  localStorage.setItem("vasd_user", name);
  localStorage.setItem("vasd_role", role);
  showUser.innerText = `${name} (${role})`;
  loginPanel.style.display = "none";
  userInfo.style.display = "flex";
};

window.logout = function () { localStorage.clear(); location.reload(); };

/* â”€â”€ Restore Session â”€â”€ */
const savedName = localStorage.getItem("vasd_user");
const savedRole = localStorage.getItem("vasd_role");
if (savedName && savedRole) {
  showUser.innerText = `${savedName} (${savedRole})`;
  loginPanel.style.display = "none";
  userInfo.style.display = "flex";
}

/* â”€â”€ Dashboard Badges â”€â”€ */
async function loadSummary() {
  const waiting  = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","waiting")).count || 0;
  const surgery  = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","surgery")).count || 0;
  const recovery = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","recovery")).count || 0;
  const ready    = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","ready_to_go_home")).count || 0;

  const setBadge = (id, count, label) => {
    const el = document.getElementById(id);
    if (el) {
      el.innerText = `${count} ${label}`;
      el.style.display = count > 0 ? "block" : "none";
    }
  };
  
  setBadge("badge-anes-menu",     waiting,  "à¸£à¸­à¸„à¸´à¸§");
  setBadge("badge-surgery-menu",  surgery,  "à¸à¸³à¸¥à¸±à¸‡à¸œà¹ˆà¸²");
  setBadge("badge-recovery-menu", recovery, "à¸à¸±à¸à¸Ÿà¸·à¹‰à¸™");
  setBadge("badge-rx-menu",       ready,    "à¸£à¸­à¸ˆà¸±à¸”à¸¢à¸²");
}

loadSummary();

supabase.channel('dashboard-live')
  .on('postgres_changes', { event: '*', schema: 'public', table: 'vasd_queue' }, loadSummary)
  .subscribe();
</script>

</body>
</html>
