<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>RMUTTO - VASD ‚Äì Veterinary Academic Service Division</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&family=IBM+Plex+Sans+Thai:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
  :root {
    --navy: #0d1b2a;
    --teal: #1a6b72;
    --teal-light: #22919a;
    --accent: #00d4aa;
    --accent2: #f0a500;
    --bg: #f0f4f8;
    --surface: #ffffff;
    --surface2: #f7fafc;
    --text: #1a202c;
    --text-muted: #718096;
    --border: #e2e8f0;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
    --shadow-md: 0 4px 16px rgba(13,27,42,0.08), 0 2px 6px rgba(13,27,42,0.04);
    --shadow-lg: 0 12px 40px rgba(13,27,42,0.12);
    --radius: 14px;
    --radius-sm: 8px;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: "Sarabun", sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
  header {
    background: var(--navy);
    padding: 0 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 68px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 20px rgba(0,0,0,0.25);
  }

  .header-brand {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .brand-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--teal-light), var(--accent));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }

  .brand-text h1 {
    font-size: 17px;
    font-weight: 700;
    color: #ffffff;
    letter-spacing: 0.3px;
    line-height: 1.2;
  }

  .brand-text span {
    font-size: 11px;
    color: rgba(255,255,255,0.5);
    font-weight: 400;
    letter-spacing: 0.5px;
  }

  /* ‚îÄ‚îÄ‚îÄ USER PANEL ‚îÄ‚îÄ‚îÄ */
  .user-panel {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .user-panel input,
  .user-panel select {
    padding: 8px 12px;
    font-size: 13px;
    font-family: "Sarabun", sans-serif;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: var(--radius-sm);
    color: #fff;
    outline: none;
    transition: border-color 0.2s, background 0.2s;
  }

  .user-panel input::placeholder { color: rgba(255,255,255,0.4); }
  .user-panel input:focus,
  .user-panel select:focus {
    border-color: var(--accent);
    background: rgba(255,255,255,0.12);
  }

  .user-panel select option { background: var(--navy); color: #fff; }

  .btn-ok {
    padding: 8px 18px;
    font-size: 13px;
    font-weight: 600;
    font-family: "Sarabun", sans-serif;
    background: linear-gradient(135deg, var(--teal-light), var(--accent));
    color: #fff;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: opacity 0.2s, transform 0.15s;
    white-space: nowrap;
  }
  .btn-ok:hover { opacity: 0.9; transform: translateY(-1px); }

  .btn-logout {
    padding: 7px 14px;
    font-size: 13px;
    font-weight: 500;
    font-family: "Sarabun", sans-serif;
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.8);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.2s;
  }
  .btn-logout:hover { background: rgba(255,255,255,0.18); }

  .user-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 30px;
    padding: 5px 14px 5px 8px;
  }

  .user-avatar {
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, var(--teal-light), var(--accent));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
  }

  #showUser {
    font-size: 13px;
    color: rgba(255,255,255,0.9);
    font-weight: 500;
  }

  /* ‚îÄ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 32px 24px;
    flex: 1;
  }

  /* ‚îÄ‚îÄ‚îÄ DATE BAR ‚îÄ‚îÄ‚îÄ */
  .date-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 28px;
    animation: fadeUp 0.4s ease both;
  }

  .date-bar h2 {
    font-size: 22px;
    font-weight: 700;
    color: var(--navy);
  }

  .date-chip {
    font-size: 13px;
    color: var(--text-muted);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 5px 14px;
  }

  /* ‚îÄ‚îÄ‚îÄ SUMMARY CARDS ‚îÄ‚îÄ‚îÄ */
  .summary {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 32px;
  }

  @media (max-width: 720px) {
    .summary { grid-template-columns: repeat(2, 1fr); }
  }

  .summary-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: 22px 20px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: relative;
    overflow: hidden;
    animation: fadeUp 0.4s ease both;
    transition: box-shadow 0.2s, transform 0.2s;
  }

  .summary-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .summary-card::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    border-radius: var(--radius) var(--radius) 0 0;
  }

  .summary-card:nth-child(1)::before { background: linear-gradient(90deg, var(--teal), var(--accent)); }
  .summary-card:nth-child(2)::before { background: linear-gradient(90deg, #e53e3e, #fc8181); }
  .summary-card:nth-child(3)::before { background: linear-gradient(90deg, #d69e2e, var(--accent2)); }
  .summary-card:nth-child(4)::before { background: linear-gradient(90deg, #38a169, #68d391); }

  .summary-card:nth-child(1) { animation-delay: 0.05s; }
  .summary-card:nth-child(2) { animation-delay: 0.1s; }
  .summary-card:nth-child(3) { animation-delay: 0.15s; }
  .summary-card:nth-child(4) { animation-delay: 0.2s; }

  .card-icon {
    font-size: 22px;
    margin-bottom: 10px;
    display: block;
  }

  .summary-card h2 {
    font-size: 36px;
    font-weight: 700;
    color: var(--navy);
    line-height: 1;
    margin-bottom: 4px;
  }

  .summary-card p {
    font-size: 13px;
    color: var(--text-muted);
    font-weight: 400;
  }

  /* ‚îÄ‚îÄ‚îÄ SECTION LABEL ‚îÄ‚îÄ‚îÄ */
  .section-label {
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 1.2px;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 14px;
    animation: fadeUp 0.4s 0.2s ease both;
  }

  /* ‚îÄ‚îÄ‚îÄ MENU CARDS ‚îÄ‚îÄ‚îÄ */
  .menu {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
    gap: 16px;
  }

  .card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: 24px 22px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    cursor: pointer;
    transition: box-shadow 0.2s, transform 0.2s, border-color 0.2s;
    animation: fadeUp 0.4s ease both;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    display: block;
  }

  .card:nth-child(1) { animation-delay: 0.25s; }
  .card:nth-child(2) { animation-delay: 0.3s; }
  .card:nth-child(3) { animation-delay: 0.35s; }
  .card:nth-child(4) { animation-delay: 0.4s; }
  .card:nth-child(5) { animation-delay: 0.45s; }
  .card:nth-child(6) { animation-delay: 0.5s; }
  .card:nth-child(7) { animation-delay: 0.55s; }
  .card:nth-child(8) { animation-delay: 0.60s; }

  .card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-3px);
    border-color: var(--teal-light);
  }

  .card:hover .card-arrow { opacity: 1; transform: translateX(0); }

  .card-emoji {
    font-size: 26px;
    display: block;
    margin-bottom: 12px;
    line-height: 1;
  }

  .card h3 {
    font-size: 15px;
    font-weight: 600;
    color: var(--navy);
    margin-bottom: 4px;
  }

  .card p {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.5;
    margin-top: 4px;
  }

  .card-arrow {
    position: absolute;
    bottom: 18px;
    right: 18px;
    width: 24px;
    height: 24px;
    background: var(--teal-light);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 12px;
    opacity: 0;
    transform: translateX(4px);
    transition: opacity 0.2s, transform 0.2s;
  }

  /* Disabled card */
  .card.disabled {
    opacity: 0.55;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
  footer {
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    padding: 20px;
    border-top: 1px solid var(--border);
    background: var(--surface);
  }

  /* ‚îÄ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ‚îÄ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>

<body>

<header>
  <div class="header-brand">
    <div class="brand-icon">üêæ</div>
    <div class="brand-text">
      <h1>RMUTTO ‚Äì VASD</h1>
      <span>Veterinary Academic Service Division</span>
    </div>
  </div>

  <div class="user-panel" id="loginPanel">
    <input id="userName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" style="width:120px">
    <select id="userRole">
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</option>
      <option value="admin">admin</option>
      <option value="‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</option>
      <option value="‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå">‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå</option>
      <option value="‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</option>
      <option value="‡∏ô‡∏® ‡∏õ‡∏µ 4 ‡∏ß‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏µ">‡∏ô‡∏® ‡∏õ‡∏µ 4 ‡∏ß‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏µ</option>
      <option value="‡∏ô‡∏® ‡∏õ‡∏µ 4 ‡∏®‡∏±‡∏•‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå">‡∏ô‡∏® ‡∏õ‡∏µ 4 ‡∏®‡∏±‡∏•‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå</option>
      <option value="‡∏ô‡∏® ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">‡∏ô‡∏® ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
      <option value="‡∏ô‡∏® ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î">‡∏ô‡∏® ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</option>
      <option value="‡∏ô‡∏® ‡∏ä‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">‡∏ô‡∏® ‡∏ä‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
    </select>
    <input id="adminPwd" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™ admin"
           style="display:none;width:90px">
    <button class="btn-ok" onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>

  <div class="user-panel" id="userInfo" style="display:none">
    <div class="user-badge">
      <div class="user-avatar">üë§</div>
      <span id="showUser"></span>
    </div>
    <button class="btn-logout" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>
</header>

<div class="container">

  <div class="date-bar">
    <h2>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
    <div class="date-chip" id="todayDate">‚Äì</div>
  </div>

  <div class="summary">
    <div class="summary-card">
      <span class="card-icon">üêæ</span>
      <h2 id="totalAnimal">‚Äì</h2>
      <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
    </div>
    <div class="summary-card">
      <span class="card-icon">üî¨</span>
      <h2 id="inSurgery">‚Äì</h2>
      <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</p>
    </div>
    <div class="summary-card">
      <span class="card-icon">üõèÔ∏è</span>
      <h2 id="recovery">‚Äì</h2>
      <p>‡∏û‡∏±‡∏Å‡∏ü‡∏∑‡πâ‡∏ô</p>
    </div>
    <div class="summary-card">
      <span class="card-icon">‚úÖ</span>
      <h2 id="done">‚Äì</h2>
      <p>‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>
    </div>
  </div>

  <div class="section-label">‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</div>
  <div class="menu">

    <div class="card" onclick="location.href='registration.html'">
      <span class="card-emoji">üìù</span>
      <h3>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h3>
      <p>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card" onclick="location.href='animals.html'">
      <span class="card-emoji">üêæ</span>
      <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
      <p>‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card" onclick="location.href='surgery.html'">
      <span class="card-emoji">üìã</span>
      <h3>‡πÇ‡∏ï‡πä‡∏∞‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</h3>
      <p>‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card" onclick="location.href='anesthesia.html'">
      <span class="card-emoji">ü©∫</span>
      <h3>‡∏ß‡∏≤‡∏á‡∏¢‡∏≤‡∏™‡∏•‡∏ö</h3>
      <p>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≤ / ‡∏ß‡∏≤‡∏á‡∏¢‡∏≤ / ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Vitals</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card" onclick="location.href='recovery.html'">
      <span class="card-emoji">üü£</span>
      <h3>‡∏û‡∏±‡∏Å‡∏ü‡∏∑‡πâ‡∏ô</h3>
      <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card" onclick="location.href='rx.html'">
      <span class="card-emoji">üíä</span>
      <h3>‡πÇ‡∏ï‡πä‡∏∞‡∏à‡∏±‡∏î‡∏¢‡∏≤</h3>
      <p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏¢‡∏≤</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

    <div class="card disabled">
      <span class="card-emoji">üìä</span>
      <h3>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
      <p>‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</p>
    </div>

    <div class="card" onclick="location.href='settings.html'">
      <span class="card-emoji">‚öôÔ∏è</span>
      <h3>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
      <p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©</p>
      <div class="card-arrow">‚Ä∫</div>
    </div>

  </div>
</div>

<footer>
  RMUTTO ‚Äì VASD ¬© 2026 &nbsp;¬∑&nbsp; Veterinary Academic Service Division
</footer>

<script type="module">
import { supabase } from "./js/supabase.js";

/* ‚îÄ‚îÄ Date ‚îÄ‚îÄ */
const dateEl = document.getElementById("todayDate");
const now = new Date();
dateEl.textContent = now.toLocaleDateString("th-TH", {
  weekday: "long", year: "numeric", month: "long", day: "numeric"
});

/* ‚îÄ‚îÄ Login ‚îÄ‚îÄ */
const nameInput  = document.getElementById("userName");
const roleSelect = document.getElementById("userRole");
const pwdInput   = document.getElementById("adminPwd");
const loginPanel = document.getElementById("loginPanel");
const userInfo   = document.getElementById("userInfo");
const showUser   = document.getElementById("showUser");

roleSelect.onchange = () => {
  pwdInput.style.display = roleSelect.value === "admin" ? "inline-block" : "none";
};

window.login = function () {
  const name = nameInput.value.trim();
  const role = roleSelect.value;
  if (!name || !role) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà"); return; }
  if (role === "admin" && pwdInput.value !== "2500") { alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô admin ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); return; }
  localStorage.setItem("vasd_user", name);
  localStorage.setItem("vasd_role", role);
  showUser.innerText = `${name} (${role})`;
  loginPanel.style.display = "none";
  userInfo.style.display = "flex";
};

window.logout = function () {
  localStorage.clear();
  location.reload();
};

/* ‚îÄ‚îÄ Restore Session ‚îÄ‚îÄ */
const savedName = localStorage.getItem("vasd_user");
const savedRole = localStorage.getItem("vasd_role");
if (savedName && savedRole) {
  showUser.innerText = `${savedName} (${savedRole})`;
  loginPanel.style.display = "none";
  userInfo.style.display = "flex";
}

/* ‚îÄ‚îÄ Dashboard Summary ‚îÄ‚îÄ */
async function loadSummary() {
  const { data: eventId } = await supabase.rpc("get_today_event");

  const total    = (await supabase.from("vasd_animal").select("*",{count:"exact",head:true}).eq("event_id",eventId)).count;
  
  // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
  const surgery  = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","surgery")).count;
  const recovery = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","recovery")).count;
  const done     = (await supabase.from("vasd_queue").select("*",{count:"exact",head:true}).eq("status","ready_to_go_home")).count;

  document.getElementById("totalAnimal").innerText = total    ?? 0;
  document.getElementById("inSurgery").innerText   = surgery  ?? 0;
  document.getElementById("recovery").innerText    = recovery ?? 0;
  document.getElementById("done").innerText        = done     ?? 0;
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Dashboard
loadSummary();

// Real-time Dashboard Update (Optional ‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå)
supabase.channel('dashboard-live')
  .on('postgres_changes', { event: '*', schema: 'public', table: 'vasd_queue' }, loadSummary)
  .on('postgres_changes', { event: '*', schema: 'public', table: 'vasd_animal' }, loadSummary)
  .subscribe();

</script>
</body>
</html>
