<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>DB Manage ‚Äì RMUTTO VASD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@700&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --navy: #0b1929; --navy-mid: #112240; --teal: #0ea5a0; --teal-light: #14c4bc; --danger: #ef4444;
  --surface: rgba(255,255,255,0.05); --border: rgba(255,255,255,0.1); --text: #e2e8f0; --text-dim: #94a3b8;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: "Sarabun", sans-serif; background: var(--navy); color: var(--text); padding-bottom: 100px; }

header { 
  padding: 15px; display: flex; align-items: center; gap: 15px; 
  background: rgba(11,25,41,0.8); backdrop-filter: blur(10px); 
  position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border);
}
.btn-back { 
  width: 40px; height: 40px; border-radius: 12px; background: var(--surface); 
  border: 1px solid var(--border); color: #fff; text-decoration: none; 
  display: flex; align-items: center; justify-content: center; 
}

.container { padding: 24px 20px; max-width: 600px; margin: 0 auto; }

/* Danger Zone Card */
.card { background: var(--surface); border: 1px solid var(--border); border-radius: 24px; padding: 28px 20px; }
.danger-zone { border: 1px solid rgba(239, 68, 68, 0.3); background: rgba(239, 68, 68, 0.05); text-align: center; }
.danger-icon { font-size: 40px; margin-bottom: 15px; display: block; }
.danger-title { color: var(--danger); font-size: 20px; font-family: 'Outfit', sans-serif; font-weight: 700; margin-bottom: 12px; }
.danger-desc { font-size: 14px; color: var(--text-dim); line-height: 1.6; margin-bottom: 25px; }

.btn-clear { 
  width: 100%; padding: 18px; background: var(--danger); border: none; color: #fff; 
  border-radius: 16px; font-weight: 700; font-size: 16px; cursor: pointer; 
  transition: 0.3s; box-shadow: 0 8px 20px rgba(239, 68, 68, 0.25);
}
.btn-clear:active { transform: scale(0.96); opacity: 0.9; }

/* Bottom Nav */
.bottom-nav {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000;
  background: rgba(11, 25, 41, 0.95); backdrop-filter: blur(20px);
  border-top: 1px solid var(--border); display: flex; justify-content: space-around;
  padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
}
.nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; text-decoration: none; color: var(--text-dim); flex: 1; }
.nav-item.active { color: var(--teal-light); }
.nav-icon { font-size: 20px; }
.nav-label { font-size: 10px; font-weight: 600; }
</style>
</head>
<body>

<header>
  <a href="settings.html" class="btn-back">‚Üê</a>
  <h2 style="font-family:'Outfit'; font-size:18px; letter-spacing: 0.5px;">Database Management</h2>
</header>

<div class="container">
  <div class="card danger-zone">
    <span class="danger-icon">‚ö†Ô∏è</span>
    <h3 class="danger-title">Danger Zone</h3>
    <p class="danger-desc">
      ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå ‡∏Ñ‡∏¥‡∏ß ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£ 
      ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
    </p>
    <button class="btn-clear" onclick="clearDB()">üî• ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà</button>
  </div>
</div>

<nav class="bottom-nav">
  <a href="index.html" class="nav-item">
    <span class="nav-icon">üìä</span>
    <span class="nav-label">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</span>
  </a>
  <a href="settings.html" class="nav-item active">
    <span class="nav-icon">‚öôÔ∏è</span>
    <span class="nav-label">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
  </a>
</nav>

<script type="module">
import { supabase } from "./js/supabase.js";

window.clearDB = async () => {
  const pass = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö:");
  if (pass !== "2500") {
    alert("‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!");
    return;
  }

  if (!confirm("üö® ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ")) return;
  
  try {
    // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å ID ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á (‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
    const { error } = await supabase
      .from('vasd_animal')
      .delete()
      .neq('id', '00000000-0000-0000-0000-000000000000');
    
    if (error) throw error;

    alert("‚úÖ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
    window.location.href = "index.html"; // ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï

  } catch (err) {
    alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + err.message);
  }
};
</script>
</body>
</html>
