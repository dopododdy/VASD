<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>DB Manage ‚Äì RMUTTO VASD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@700&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --navy: #0b1929; --navy-mid: #112240; --teal: #0ea5a0; --danger: #ef4444;
  --surface: rgba(255,255,255,0.05); --border: rgba(255,255,255,0.1); --text: #e2e8f0;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: "Sarabun", sans-serif; background: var(--navy); color: var(--text); padding-bottom: 40px; }
header { padding: 15px; display: flex; align-items: center; gap: 15px; background: rgba(11,25,41,0.8); backdrop-filter: blur(10px); sticky; top: 0; }
.btn-back { width: 40px; height: 40px; border-radius: 12px; background: var(--surface); border: 1px solid var(--border); color: #fff; text-decoration: none; display: flex; align-items: center; justify-content: center; }

.container { padding: 20px; max-width: 600px; margin: 0 auto; }
.card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 20px; margin-bottom: 20px; }
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.stat-item { background: var(--navy-mid); padding: 15px; border-radius: 15px; border: 1px solid var(--border); text-align: center; }
.stat-val { font-family: "Outfit", sans-serif; font-size: 26px; font-weight: 700; color: var(--teal); }
.stat-label { font-size: 11px; color: #94a3b8; margin-top: 4px; }

.danger-zone { border: 1px solid rgba(239, 68, 68, 0.3); background: rgba(239, 68, 68, 0.05); }
.btn-clear { width: 100%; padding: 18px; background: var(--danger); border: none; color: #fff; border-radius: 14px; font-weight: 700; font-size: 16px; cursor: pointer; margin-top: 15px; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3); }
</style>
</head>
<body>

<header>
  <a href="settings.html" class="btn-back">‚Üê</a>
  <h2 style="font-family:'Outfit'; font-size:18px;">Database</h2>
</header>

<div class="container">
  <div class="card">
    <h3 style="margin-bottom:15px; font-size:16px;">üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
    <div class="stat-grid">
      <div class="stat-item"><div class="stat-val" id="c-animal">0</div><div class="stat-label">‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div></div>
      <div class="stat-item"><div class="stat-val" id="c-queue">0</div><div class="stat-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏ß</div></div>
    </div>
  </div>

  <div class="card danger-zone">
    <h3 style="color:var(--danger); font-size:16px;">‚ö†Ô∏è Danger Zone</h3>
    <p style="font-size:12px; color:#94a3b8; margin-top:8px; line-height:1.5;">‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏≤‡∏ß‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà (‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: 2500)</p>
    <button class="btn-clear" onclick="clearDB()">üî• ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏ß</button>
  </div>
</div>

<script type="module">
import { supabase } from "./js/supabase.js";
async function loadStats() {
  const { count: a } = await supabase.from('vasd_animal').select('*', { count: 'exact', head: true });
  const { count: q } = await supabase.from('vasd_queue').select('*', { count: 'exact', head: true });
  document.getElementById('c-animal').innerText = a || 0;
  document.getElementById('c-queue').innerText = q || 0;
}
window.clearDB = async () => {
  if (prompt("‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (2500):") !== "2500") return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î!");
  if (!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) return;
  await supabase.from('vasd_animal').delete().neq('id', '00000000-0000-0000-0000-000000000000');
  alert("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß"); loadStats();
};
loadStats();
</script>
</body>
</html>
