<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>à¹‚à¸•à¹Šà¸°à¸§à¸´à¸ªà¸±à¸à¸à¸µ â€“ VASD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --navy:         #0b1929;
  --navy-mid:     #112240;
  --teal:         #0ea5a0;
  --teal-light:   #14c4bc;
  --teal-glow:    rgba(14,165,160,0.25);
  --amber:        #f59e0b;
  --amber-soft:   rgba(245,158,11,0.14);
  --rose:         #ef4444;
  --rose-soft:    rgba(239,68,68,0.12);
  --emerald:      #10b981;
  --emerald-soft: rgba(16,185,129,0.12);
  --slate-400:    #94a3b8;
  --slate-300:    #cbd5e1;
  --white:        #ffffff;
  --border-2:     rgba(255,255,255,0.14);
  --text-dim:     #94a3b8;
  
  --radius-lg:    20px;
  --radius-md:    12px;
  --radius-sm:    8px;
  --shadow-sm:    0 4px 20px rgba(0,0,0,0.2);
  --font-main:    'Outfit', 'Sarabun', sans-serif;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body {
  margin: 0; padding: 0;
  background-color: var(--navy);
  color: var(--white);
  font-family: var(--font-main);
  line-height: 1.5;
  padding-bottom: 90px; /* à¹€à¸œà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¹ƒà¸«à¹‰ Bottom Nav */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.top-nav {
  position: sticky; top: 0; z-index: 100;
  background: rgba(11, 25, 41, 0.85);
  backdrop-filter: blur(12px);
  padding: 12px 20px;
  display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.brand { display: flex; align-items: center; gap: 10px; }
.nav-title { font-size: 18px; font-weight: 800; color: var(--white); letter-spacing: -0.5px; }
.brand-icon { font-size: 24px; }

.btn-home {
  padding: 8px 14px; font-size: 13px; font-weight: 600; font-family: "Sarabun", sans-serif;
  background: rgba(255,255,255,0.08); color: var(--white);
  border: 1px solid var(--border-2); border-radius: var(--radius-sm); cursor: pointer;
  display: flex; align-items: center; gap: 6px;
  transition: background 0.2s;
}
.btn-home:hover { background: rgba(255,255,255,0.15); }

.container { padding: 16px; max-width: 600px; margin: 0 auto; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUEUE CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.anesthesia-card {
  background: var(--navy-mid);
  border-radius: var(--radius-lg);
  margin-bottom: 20px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: var(--shadow-sm);
  animation: fadeIn 0.4s ease-out;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.ac-header {
  padding: 16px 20px;
  background: rgba(255,255,255,0.03);
  display: flex; justify-content: space-between; align-items: center;
}
.q-num { font-size: 24px; font-weight: 800; color: var(--teal-light); }
.animal-name { font-size: 18px; font-weight: 700; color: var(--white); }

.ac-body { padding: 20px; }

.info-chips { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px; }
.chip {
  padding: 6px 14px; border-radius: 50px; font-size: 13px; font-weight: 600;
  background: rgba(255,255,255,0.08); color: var(--white);
  border: 1px solid rgba(255,255,255,0.05);
}

/* Health Note Display */
.health-note-strip {
  display: flex; align-items: flex-start; gap: 10px;
  background: var(--rose-soft); 
  border: 1px solid rgba(239,68,68,0.2);
  border-radius: var(--radius-sm); 
  padding: 12px 14px;
  font-size: 14px; color: var(--rose);
  margin-bottom: 16px;
}

.est-weight-strip {
  background: var(--amber-soft);
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px;
}
.est-label { font-size: 12px; color: var(--amber); font-weight: 700; }
.est-val { font-size: 16px; font-weight: 800; color: var(--amber); }

/* Weight Input */
.input-label { display: block; font-size: 13px; font-weight: 600; color: var(--slate-400); margin-bottom: 8px; }
.weight-input {
  width: 100%; background: rgba(0,0,0,0.2); border: 2px solid rgba(255,255,255,0.1);
  border-radius: var(--radius-md); padding: 14px 16px; color: var(--white);
  font-size: 20px; font-weight: 800; transition: all 0.2s;
  margin-bottom: 20px;
}
.weight-input:focus { border-color: var(--teal); outline: none; background: rgba(14,165,160,0.05); }

/* Drug Table */
.drug-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
.drug-table th { text-align: left; font-size: 11px; text-transform: uppercase; color: var(--slate-400); padding: 8px 4px; border-bottom: 1px solid rgba(255,255,255,0.05); }
.drug-table td { padding: 12px 4px; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.03); }
.drug-name { font-weight: 700; color: var(--slate-300); }
.drug-calc { font-weight: 800; color: var(--teal-light); text-align: right; font-size: 16px; }

/* Buttons */
.btn-primary {
  width: 100%; background: var(--teal); color: var(--navy); border: none;
  padding: 16px; border-radius: var(--radius-md); font-size: 16px; font-weight: 800;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  cursor: pointer; transition: transform 0.1s;
}
.btn-primary:active { transform: scale(0.97); }

/* Loading State */
#loading-overlay {
  position: fixed; inset: 0; background: var(--navy); z-index: 1000;
  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 15px;
}
.spinner { width: 40px; height: 40px; border: 4px solid rgba(14,165,160,0.1); border-top-color: var(--teal); border-radius: 50%; animation: spin 0.8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE BOTTOM NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bottom-nav {
  display: none;
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 300;
  background: rgba(11,25,41,0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-top: 1px solid var(--border-2);
  padding: 8px 0 max(8px, env(safe-area-inset-bottom));
  grid-template-columns: repeat(5, 1fr);
}
.nav-item {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  padding: 6px 4px;
  font-size: 10px; color: var(--text-dim);
  text-decoration: none; cursor: pointer;
  transition: color 0.2s;
  -webkit-tap-highlight-color: transparent;
}
.nav-item:active { color: var(--teal); }
.nav-icon { font-size: 21px; line-height: 1; }
.nav-item.active { color: var(--teal); }
.nav-item.active .nav-icon { filter: drop-shadow(0 0 6px var(--teal)); }

@media (max-width: 640px) {
  .bottom-nav { display: grid; }
}

</style>
</head>
<body>

<div id="loading-overlay">
  <div class="spinner"></div>
  <div style="font-weight:600; color:var(--teal-light)">à¸à¸³à¸¥à¸±à¸‡à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸„à¸´à¸§à¸§à¸²à¸‡à¸¢à¸²...</div>
</div>

<header class="top-nav">
  <div class="brand">
    <div class="brand-icon">ğŸ’‰</div>
    <div class="nav-title">à¹‚à¸•à¹Šà¸°à¸§à¸´à¸ªà¸±à¸à¸à¸µ</div>
  </div>
  <button class="btn-home" onclick="location.href='index.html'">
    ğŸ  à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸
  </button>
</header>

<div class="container" id="anesthesia-container">
  </div>

<nav class="bottom-nav">
  <a class="nav-item" href="index.html">
    <span class="nav-icon">ğŸ </span>à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸
  </a>
  <a class="nav-item" href="animals.html">
    <span class="nav-icon">ğŸ¾</span>à¸ªà¸±à¸•à¸§à¹Œ
  </a>
  <a class="nav-item active" href="anesthesia.html">
    <span class="nav-icon">ğŸ©º</span>à¸§à¸²à¸‡à¸¢à¸²
  </a>
  <a class="nav-item" href="surgery.html">
    <span class="nav-icon">ğŸ“‹</span>à¸œà¹ˆà¸²à¸•à¸±à¸”
  </a>
  <a class="nav-item" href="recovery.html">
    <span class="nav-icon">ğŸ›ï¸</span>à¸à¸±à¸à¸Ÿà¸·à¹‰à¸™
  </a>
</nav>

<script type="module">
import { supabase } from './js/supabase.js';

const container = document.getElementById("anesthesia-container");
const loading = document.getElementById("loading-overlay");

async function loadAnesthesiaQueue() {
  try {
    const { data: queueData, error } = await supabase
      .from("vasd_queue")
      .select(`
        id, animal_id, status,
        vasd_animal(
          id, queue_number, animal_name, species, sex, est_weight, actual_weight,
          health_note,
          vasd_owner(owner_name),
          vasd_service(service_type)
        )
      `)
      .eq("status", "waiting")
      .order("created_at", { ascending: true });

    if (error) throw error;

    // à¸‹à¹ˆà¸­à¸™ Loading à¸—à¸±à¸™à¸—à¸µà¹€à¸¡à¸·à¹ˆà¸­à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
    loading.style.display = "none";

    if (!queueData || queueData.length === 0) {
      container.innerHTML = `
        <div style="text-align:center; padding:60px 20px; color:var(--slate-400);">
          <div style="font-size: 40px; margin-bottom: 10px;">âœ…</div>
          <div>à¹„à¸¡à¹ˆà¸¡à¸µà¹€à¸„à¸ªà¸£à¸­à¸§à¸²à¸‡à¸¢à¸²à¹ƒà¸™à¸‚à¸“à¸°à¸™à¸µà¹‰</div>
        </div>
      `;
      return;
    }

    container.innerHTML = "";
    queueData.forEach(q => {
      const a = q.vasd_animal;
      const animalId = a.id;
      
      const card = document.createElement("div");
      card.className = "anesthesia-card";

      // à¸„à¸³à¸™à¸§à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸«à¹‰à¸ªà¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™
      const speciesName = a.species === "à¸¡" ? "à¹à¸¡à¸§" : a.species === "à¸ª" ? "à¸ªà¸¸à¸™à¸±à¸‚" : "à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸";
      const sexName = a.sex === "à¸œà¸¹à¹‰" ? "à¹€à¸à¸¨à¸œà¸¹à¹‰" : a.sex === "à¹€à¸¡à¸µà¸¢" ? "à¹€à¸à¸¨à¹€à¸¡à¸µà¸¢" : (a.sex || "-");
      const serviceName = a.vasd_service?.service_type || "à¸—à¸³à¸«à¸¡à¸±à¸™/à¸—à¸±à¹ˆà¸§à¹„à¸›";
      
      // à¸”à¸¶à¸‡à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸•à¸±à¹‰à¸‡à¸•à¹‰à¸™
      const initialWeight = a.actual_weight || a.est_weight || "";

      // logic à¹à¸ªà¸”à¸‡à¸šà¸±à¸™à¸—à¸¶à¸à¸ªà¸¸à¸‚à¸ à¸²à¸
      const noteMarkup = a.health_note 
        ? `<div class="health-note-strip">
             <span style="font-size:18px;">âš ï¸</span>
             <div>
               <div style="font-size:10px; font-weight:800; text-transform:uppercase; opacity:0.8;">à¸£à¸°à¸§à¸±à¸‡à¸à¸´à¹€à¸¨à¸© / à¸šà¸±à¸™à¸—à¸¶à¸à¸ªà¸¸à¸‚à¸ à¸²à¸</div>
               <div style="font-weight:700;">${a.health_note}</div>
             </div>
           </div>`
        : "";

      // à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸²à¸à¸·à¹‰à¸™à¸à¸²à¸™ (à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆ)
      let drugRows = `
        <tr>
          <td><span class="drug-name">Adrenaline (1:10,000)</span><br><small>Dose 0.01 mg/kg (0.1mg/ml)</small></td>
          <td class="drug-calc" id="calc-adre-${animalId}">-</td>
        </tr>
        <tr>
          <td><span class="drug-name">Atropine</span><br><small>0.04 mg/kg (1mg/ml)</small></td>
          <td class="drug-calc" id="calc-atro-${animalId}">-</td>
        </tr>
        <tr>
          <td><span class="drug-name">Xylazine</span><br><small>1 mg/kg (20mg/ml)</small></td>
          <td class="drug-calc" id="calc-xyla-${animalId}">-</td>
        </tr>
        <tr>
          <td><span class="drug-name">Zoletil</span><br><small>3 mg/kg (100mg/ml)</small></td>
          <td class="drug-calc" id="calc-zole-${animalId}">-</td>
        </tr>
      `;

      // à¸–à¸±à¸²à¹€à¸›à¹‡à¸™à¸ªà¸¸à¸™à¸±à¸‚ à¹ƒà¸«à¹‰à¹€à¸à¸´à¹ˆà¸¡ Thiopental
      if (a.species === "à¸ª") {
        drugRows += `
        <tr>
          <td><span class="drug-name">Thiopental</span><br><small>5 mg/kg (10mg/ml)</small></td>
          <td class="drug-calc" id="calc-thio-${animalId}">-</td>
        </tr>
        `;
      }

      card.innerHTML = `
        <div class="ac-header">
          <div class="q-num">#${a.queue_number || '??'}</div>
          <div class="animal-name">${a.animal_name}</div>
        </div>
        
        <div class="ac-body">
          <div class="info-chips">
            <div class="chip">${a.species === 'à¸¡' ? 'ğŸ±' : 'ğŸ¶'} ${speciesName}</div>
            <div class="chip">âš§ ${sexName}</div>
            <div class="chip">ğŸ“‹ ${serviceName}</div>
          </div>

          ${noteMarkup}

          <div class="est-weight-strip">
            <span class="est-label">à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸ˆà¸²à¸à¹‚à¸•à¹Šà¸°à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™</span>
            <span class="est-val">${a.est_weight ? a.est_weight + ' kg' : 'à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸›à¸£à¸°à¹€à¸¡à¸´à¸™'}</span>
          </div>

          <label class="input-label">à¸£à¸°à¸šà¸¸à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸ˆà¸£à¸´à¸‡ (Actual Weight - kg)</label>
          <input type="number" step="0.01" class="weight-input" 
            id="weight-${animalId}" 
            placeholder="0.00"
            value="${initialWeight}"
            oninput="window.calcDrugs('${animalId}')">

          <table class="drug-table">
            <thead>
              <tr><th>Drug List</th><th style="text-align:right">Dose (ml)</th></tr>
            </thead>
            <tbody>
              ${drugRows}
            </tbody>
          </table>

          <button class="btn-primary" onclick="window.sendToSurgery('${animalId}')">
            <span>à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¸°à¸ªà¹ˆà¸‡à¹€à¸‚à¹‰à¸²à¹‚à¸•à¹Šà¸°à¸œà¹ˆà¸²à¸•à¸±à¸”</span>
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 12h14m-7-7l7 7-7 7"></path></svg>
          </button>
        </div>
      `;
      container.appendChild(card);
      
      // à¸ªà¸±à¹ˆà¸‡à¸„à¸³à¸™à¸§à¸“à¸¢à¸²à¸—à¸±à¸™à¸—à¸µ (à¹€à¸™à¸·à¹ˆà¸­à¸‡à¸ˆà¸²à¸à¸¡à¸µà¸à¸²à¸£à¸”à¸¶à¸‡à¸„à¹ˆà¸²à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸¡à¸²à¹ƒà¸ªà¹ˆà¸Šà¹ˆà¸­à¸‡à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸ˆà¸£à¸´à¸‡à¹‚à¸”à¸¢à¸›à¸£à¸´à¸¢à¸²à¸¢)
      if(initialWeight) window.calcDrugs(animalId);
    });

  } catch (err) {
    console.error("Critical Error:", err);
    loading.style.display = "none";
    container.innerHTML = `
      <div style="background:var(--rose-soft); padding:20px; border-radius:12px; color:var(--rose); border:1px solid var(--rose);">
        <strong>à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:</strong><br>
        <small>${err.message}</small><br><br>
        <button onclick="location.reload()" style="background:var(--rose); color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer;">à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
      </div>
    `;
  }
}

/* â”€â”€ Logic â”€â”€ */
window.calcDrugs = function(animalId) {
  const w = parseFloat(document.getElementById(`weight-${animalId}`).value);
  const setV = (id, val) => {
    const el = document.getElementById(id);
    if(el) {
      el.innerText = val ? val + " ml" : "-";
      el.style.color = val ? "var(--teal-light)" : "var(--slate-400)";
    }
  };

  if (!w || w <= 0) {
    ["calc-adre-", "calc-atro-", "calc-xyla-", "calc-zole-", "calc-thio-"].forEach(p => setV(p + animalId, null));
    return;
  }

  // à¸ªà¸¹à¸•à¸£à¸„à¸³à¸™à¸§à¸“: (à¸™à¹‰à¸³à¸«à¸™à¸±à¸ * Dose_mg_kg) / à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸¡à¸‚à¹‰à¸™_mg_ml
  setV(`calc-adre-${animalId}`, ((w * 0.01) / 0.1).toFixed(2)); // Adrenaline 1:10000 = 0.1mg/ml
  setV(`calc-atro-${animalId}`, ((w * 0.04) / 1).toFixed(2));
  setV(`calc-xyla-${animalId}`, ((w * 1) / 20).toFixed(2));
  setV(`calc-zole-${animalId}`, ((w * 3) / 100).toFixed(2));
  setV(`calc-thio-${animalId}`, ((w * 5) / 10).toFixed(2)); // à¸ˆà¸°à¸–à¸¹à¸à¸‚à¹‰à¸²à¸¡à¹„à¸›à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™à¹à¸¡à¸§à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸¡à¸µ element id à¸™à¸µà¹‰
};

window.sendToSurgery = async function(animalId) {
  const weight = document.getElementById(`weight-${animalId}`).value;
  if (!weight) return alert("à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸ˆà¸£à¸´à¸‡à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡à¸„à¸´à¸§");
  
  if (!confirm("à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¹à¸¥à¸°à¸ªà¹ˆà¸‡à¸ªà¸±à¸•à¸§à¹Œà¹€à¸‚à¹‰à¸²à¹‚à¸•à¹Šà¸°à¸œà¹ˆà¸²à¸•à¸±à¸”?")) return;

  try {
    // à¸­à¸±à¸›à¹€à¸”à¸•à¸™à¹‰à¸³à¸«à¸™à¸±à¸
    await supabase.from("vasd_animal").update({ actual_weight: parseFloat(weight) }).eq("id", animalId);
    // à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¸„à¸´à¸§
    const { error } = await supabase.from("vasd_queue").update({ 
      status: "surgery", 
      updated_at: new Date() 
    }).eq("animal_id", animalId);

    if (error) throw error;
    loadAnesthesiaQueue();
  } catch (err) {
    alert("Error: " + err.message);
  }
};

// Init
loadAnesthesiaQueue();

// Realtime
supabase.channel('anes-live')
  .on('postgres_changes', { event: '*', schema: 'public', table: 'vasd_queue' }, loadAnesthesiaQueue)
  .subscribe();

</script>
</body>
</html>
